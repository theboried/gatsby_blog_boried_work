{"version":3,"sources":["../../../src/redux/reducers/babelrc.js"],"names":["_","require","module","exports","state","stages","develop","plugins","presets","options","cacheDirectory","babelrc","action","type","Object","keys","forEach","stage","payload","index","findIndex","p","name","plugin","merge"],"mappings":"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","file":"babelrc.js","sourcesContent":["const _ = require(`lodash`)\n\nmodule.exports = (\n  state = {\n    stages: {\n      develop: {\n        plugins: [],\n        presets: [],\n        options: {\n          cacheDirectory: true,\n          babelrc: false,\n        },\n      },\n      \"develop-html\": {\n        plugins: [],\n        presets: [],\n        options: {\n          cacheDirectory: true,\n          babelrc: false,\n        },\n      },\n      \"build-css\": {\n        plugins: [],\n        presets: [],\n        options: {\n          cacheDirectory: true,\n          babelrc: false,\n        },\n      },\n      \"build-html\": {\n        plugins: [],\n        presets: [],\n        options: {\n          cacheDirectory: true,\n          babelrc: false,\n        },\n      },\n      \"build-javascript\": {\n        plugins: [],\n        presets: [],\n        options: {\n          cacheDirectory: true,\n          babelrc: false,\n        },\n      },\n    },\n  },\n  action\n) => {\n  switch (action.type) {\n    case `SET_BABEL_PLUGIN`: {\n      Object.keys(state.stages).forEach(stage => {\n        if (action.payload.stage && action.payload.stage !== stage) {\n          return\n        }\n\n        const index = _.findIndex(\n          state.stages[stage].plugins,\n          p => p.name === action.payload.name\n        )\n        // If the plugin already exists, merge the options.\n        // Otherwise, add it to the end.\n        if (index !== -1) {\n          const plugin = state.stages[stage].plugins[index]\n          state.stages[stage].plugins[index] = {\n            name: plugin.name,\n            options: _.merge(plugin.options, action.payload.options),\n          }\n        } else {\n          state.stages[stage].plugins = [\n            ...state.stages[stage].plugins,\n            action.payload,\n          ]\n        }\n      })\n\n      return state\n    }\n    case `SET_BABEL_PRESET`: {\n      Object.keys(state.stages).forEach(stage => {\n        if (action.payload.stage && action.payload.stage !== stage) {\n          return\n        }\n\n        const index = _.findIndex(\n          state.stages[stage].presets,\n          p => p.name === action.payload.name\n        )\n        // If the plugin already exists, merge the options.\n        // Otherwise, add it to the end.\n        if (index !== -1) {\n          const plugin = state.stages[stage].presets[index]\n          state.stages[stage].presets[index] = {\n            name: plugin.name,\n            options: _.merge(plugin.options, action.payload.options),\n          }\n        } else {\n          state.stages[stage].presets = [\n            ...state.stages[stage].presets,\n            action.payload,\n          ]\n        }\n      })\n      return state\n    }\n    case `SET_BABEL_OPTIONS`: {\n      Object.keys(state.stages).forEach(stage => {\n        if (action.payload.stage && action.payload.stage !== stage) {\n          return\n        }\n\n        state.stages[stage].options = {\n          ...state.stages[stage].options,\n          ...action.payload.options,\n        }\n      })\n      return state\n    }\n  }\n\n  return state\n}\n"]}